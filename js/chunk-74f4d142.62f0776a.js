(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74f4d142"],{"223a":function(t,a,s){"use strict";var e=s("e9a0"),o=s.n(e);o.a},"753a":function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),s("div",{staticClass:"row container"},[s("div",{staticClass:"col-lg-6 text-center "},[s("img",{staticClass:"box",attrs:{src:t.product.imgURL,alt:""}})]),s("div",{staticClass:"col-lg-6"},[s("ul",{staticClass:"list-group"},[s("li",{staticClass:"list-group-item border-0 pl-0"},[s("h4",{staticClass:"text-primary"},[t._v(t._s(t.product.title))])]),s("li",{staticClass:"list-group-item border-0 pl-0"},[s("span",[t._v("語言 :  ")]),t._v("\n          "+t._s(t.product.language)+"\n        ")]),s("li",{staticClass:"list-group-item border-0 pl-0"},[s("span",[t._v("定價 :  ")]),t._v("\n          "+t._s(t._f("currency")(t.product.origin_price))+"\n        ")]),s("li",{staticClass:"list-group-item border-0 pl-0"},[s("span",[t._v("優惠價 :  ")]),t._v("\n          "+t._s(t._f("currency")(t.product.price))+"\n        ")]),s("li",{staticClass:"list-group-item border-0 pl-0"},[s("span",[t._v("商品說明 :  ")]),t._v("\n          "+t._s(t.product.description)+"\n        ")]),s("li",{staticClass:"list-group-item border-0 pl-0"},[s("div",{staticClass:"d-flex justify-content-between mflex"},[s("form",{staticClass:"form-inline"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.count,expression:"count"}],staticClass:"form-control form-control-sm",on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var a="_value"in t?t._value:t.value;return a});t.count=a.target.multiple?s:s[0]}}},t._l(10,function(a){return s("option",{key:a,domProps:{value:a}},[t._v("選購 "+t._s(a)+" 本")])}),0)]),s("div",{staticClass:"d-flex align-items-center justify-content-end mt-m-3"},[s("div",{staticClass:"text-muted text-nowrap mr-3"},[t._v("\n                小計\n                "),s("strong",[t._v(t._s(t._f("currency")(t.count*t.product.price)))]),t._v(" 元\n              ")]),s("button",{staticClass:"btn btn-primary btn-sm",attrs:{type:"button"},on:{click:function(a){return t.addToCart(t.product.id,t.count)}}},[t._v("\n              加到購物車\n                "),t.product.id===t.status.loadingItem?s("i",{staticClass:"fas fa-spinner fa-spin"}):t._e()])])])])])])]),s("Cart")],1)},o=[],n=s("1157"),i=s.n(n),c=s("b3b1"),r={data:function(){return{productId:"",count:1,product:{},status:{loadingItem:""},isLoading:!1}},components:{Cart:c["a"]},methods:{getSingleItem:function(t){var a=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("tantanbookstore","/product/").concat(a.productId);a.status.loadingItem=t,a.isLoading=!0,this.$http.get(s).then(function(t){a.isLoading=!1,a.product=t.data.product,a.getCart()})},addToCart:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("tantanbookstore","/cart"),o={product_id:t,qty:a};s.status.loadingItem=t,this.$http.post(e,{data:o}).then(function(t){s.status.loadingItem="",i()("#productModal").modal("hide"),t.data.success&&(s.$bus.$emit("messsage:push",t.data.message),s.getCart())})},getCart:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("tantanbookstore","/cart");this.$http.get(a).then(function(a){t.getProduct=a.data.data,t.status.loadingItem="",t.$bus.$emit("orderEvent",t.getProduct)})}},created:function(){this.productId=this.$route.params.bookid,this.getSingleItem(this.productId)}},l=r,d=(s("8e49"),s("2877")),u=Object(d["a"])(l,e,o,!1,null,"42ddae78",null);a["default"]=u.exports},"768e":function(t,a,s){},"8e49":function(t,a,s){"use strict";var e=s("768e"),o=s.n(e);o.a},b3b1:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"cart-car"},[t._m(0),s("p",{staticClass:"nums"},[t._v(t._s(t.len))])]),s("div",{staticClass:"modal fade",attrs:{id:"cartModal",tabindex:"-1",role:"dialog","aria-labelledby":"cartModalTitle","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(1),s("div",{staticClass:"modal-body"},[s("div",t._b({staticClass:"w-75 mx-auto my-5"},"div",t.getProduct,!1),[0===t.len?s("div",{staticClass:"text-center"},[s("h4",[t._v("購物車已空，快去購物吧")])]):s("table",{staticClass:"table"},[t._m(2),s("tbody",t._l(t.tempProduct.carts,function(a){return s("tr",{key:a.id},[s("td",{staticClass:"align-middle"},[s("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(s){return t.deleteCartItem(a.id)}}},[s("i",{staticClass:"far fa-trash-alt"})])]),s("td",{staticClass:"align-middle"},[t._v("\n                    "+t._s(a.product.title)+"\n                    "),a.coupon?s("div",{staticClass:"text-success"},[t._v("已套用優惠券")]):t._e()]),s("td",{staticClass:"align-middle"},[t._v(t._s(a.qty))]),s("td",{staticClass:"align-middle text-right"},[t._v(t._s(Math.floor(a.final_total)))])])}),0),s("tfoot",[s("tr",[s("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),s("td",{staticClass:"text-right"},[t._v(t._s(t.tempProduct.total))])]),t.tempProduct.final_total!==t.tempProduct.total?s("tr",[s("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v("折扣價")]),s("td",{staticClass:"text-right text-success"},[t._v(t._s(Math.floor(t.tempProduct.final_total)))])]):t._e()])]),0!==t.len?s("div",{staticClass:"input-group mb-3 input-group-sm"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.couponCode},on:{input:function(a){a.target.composing||(t.couponCode=a.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.checkCoupon}},[t._v("套用優惠碼")])])]):t._e()])]),0!==t.len?s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.goCheck}},[t._v("結帳去")])]):t._e()])])])])},o=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("a",{attrs:{href:"#","data-toggle":"modal","data-target":"#cartModal"}},[s("i",{staticClass:"fas fa-shopping-cart fa-2x"})])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"modal-header"},[s("h5",{staticClass:"modal-title",attrs:{id:"cartModalTitle"}},[t._v("購買清單")]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("th"),s("th",[t._v("品名")]),s("th",[t._v("數量")]),s("th",[t._v("單價")])])}],n={data:function(){return{getProduct:{},couponCode:"",tempProduct:{},len:0}},methods:{getCart:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("tantanbookstore","/cart");this.$http.get(a).then(function(a){t.getProduct=a.data.data,t.tempProduct=a.data.data,t.len=a.data.data.carts.length})},deleteCartItem:function(t){var a=this,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("tantanbookstore","/cart/").concat(t);this.$http.delete(s).then(function(t){a.getCart()})},checkCoupon:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("tantanbookstore","/coupon"),s={code:t.couponCode};this.$http.post(a,{data:s}).then(function(a){t.getCart()})},goCheck:function(){this.$router.push("/checkorder")}},created:function(){var t=this;t.getCart(),t.$bus.$on("orderEvent",function(a){t.tempProduct=a,t.len=a.carts.length})}},i=n,c=(s("223a"),s("2877")),r=Object(c["a"])(i,e,o,!1,null,null,null);a["a"]=r.exports},e9a0:function(t,a,s){}}]);
//# sourceMappingURL=chunk-74f4d142.62f0776a.js.map